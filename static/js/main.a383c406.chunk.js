(window["webpackJsonpstat-roller"]=window["webpackJsonpstat-roller"]||[]).push([[0],{14:function(e,t,a){},15:function(e,t,a){},16:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),r=a(8),o=a.n(r),s=(a(14),a(15),a(2)),i=a(3),c=a(6),u=a(4),p=a(5),d=a(1);var h=function(e){return l.a.createElement("div",{id:e.id,className:e.className,draggable:e.draggable,onDragStart:function(e){e.dataTransfer.setData("src",e.target.id)},onDragOver:function(e){e.preventDefault()},onTouchEnd:e.onTouchEnd},l.a.createElement("p",{className:"roll"},e.roll),l.a.createElement("p",{className:"lab"},e.id.toUpperCase()))},m=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={rolls:a.props.appState.rolls},a.genMethod="4d6 Drop Lowest",a.swapAbilities=a.swapAbilities.bind(Object(d.a)(a)),a.drop=a.drop.bind(Object(d.a)(a)),a.rollStats=a.rollStats.bind(Object(d.a)(a)),a.handleMouseEnter=a.handleMouseEnter.bind(Object(d.a)(a)),a.handleMouseLeave=a.handleMouseLeave.bind(Object(d.a)(a)),a.handleTouchAbility=a.handleTouchAbility.bind(Object(d.a)(a)),a.handleClickRollType=a.handleClickRollType.bind(Object(d.a)(a)),a}return Object(p.a)(t,e),Object(i.a)(t,[{key:"swapAbilities",value:function(e,t){var a=e.id,n=t.id,l=this.props.appState.rolls[n],r=this.props.appState.rolls[a];this.props.appState.setRoll(n,r),this.props.appState.setRoll(a,l),this.setState({rolls:this.props.appState.rolls})}},{key:"drop",value:function(e){e.preventDefault();var t=document.getElementById(e.dataTransfer.getData("src")),a=e.target.parentElement;this.swapAbilities(t,a)}},{key:"rollStats",value:function(e){this.props.appState.roll(this.genMethod),this.setState({rolls:this.props.appState.rolls})}},{key:"handleMouseEnter",value:function(e){document.getElementById("gradient").style.top="30px"}},{key:"handleMouseLeave",value:function(e){document.getElementById("gradient").style.top=""}},{key:"handleClickRollType",value:function(e){document.getElementsByClassName("active")[0].className="button",this.genMethod=e.target.firstChild.textContent,e.target.className="botton active"}},{key:"handleTouchAbility",value:function(e){e.preventDefault();var t=document.getElementsByClassName("ability active")[0];t?e.currentTarget.id!==t.id&&(t.className="ability",this.swapAbilities(t,e.currentTarget)):e.currentTarget.className="ability active"}},{key:"render",value:function(){var e=[],t=this.props.appState.rolls;for(var a in t)e.push(l.a.createElement(h,{id:a,key:a,className:"ability",draggable:"true",roll:t[a],appState:this.props.appState,onTouchEnd:this.handleTouchAbility}));return l.a.createElement("div",{className:this.props.className,id:this.props.id,onDrop:this.drop,onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave},e,l.a.createElement("div",{className:"button-div"},l.a.createElement("button",{className:"roll-button",onClick:this.rollStats,tabIndex:"0"},"Roll")),l.a.createElement("div",{className:"button-div select"},l.a.createElement("button",{className:"active",onClick:this.handleClickRollType},"4d6 Drop Lowest"),l.a.createElement("button",{onClick:this.handleClickRollType},"3d6"),l.a.createElement("button",{onClick:this.handleClickRollType},"Critical Role"),l.a.createElement("button",{onClick:this.handleClickRollType},"1d20")),l.a.createElement("div",{className:"gradient",id:"gradient"}))}}]),t}(n.Component),b=function(e){function t(){return Object(s.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return l.a.createElement("div",{className:"layout"},l.a.createElement(m,{className:"panel",id:"panel-1",appState:this.props.appState}))}}]),t}(n.Component);function f(e){return Math.ceil(Math.random()*e)}function v(){for(var e=[],t=0;t<3;t++)e.push(f(6));return{sum:function(e){return e.reduce(function(e,t){return e+t},0)}(e),dice:e}}function y(){var e=[];return e.push(f(20)),{sum:e[0],dice:e}}function g(){for(var e=[],t=6,a=0,n=0;n<4;n++){var l=f(6);l<t&&(t=l,a=n),e.push(l)}var r=e.splice(a,1),o=function(e){return e.reduce(function(e,t){return e+t},0)}(e);return e.push(r),{sum:o,dice:e}}var k=function(e){var t=function(e){return e.reduce(function(e,t){return e+t},0)},a=[];if("3d6"===e)for(var n=0;n<6;n++)a.push(v());else if("4d6 Drop Lowest"===e)for(n=0;n<6;n++)a.push(g());else if("Critical Role"===e)for(var l=0,r=[],o=0;;){for(n=0;n<6;n++)a.push(g()),r.push(a[n].sum);if(!((l=t(r))<70))break;if(console.log("Sum was "+l+". Re-rolling."),r=[],a=[],100===o){console.error("Error generating ability scores!                                This should not happen or should                                at least be very improbable");break}o++}else if("1d20"===e)for(n=0;n<6;n++)a.push(y());else"Standard Array"==e&&(a.push({sum:15,dice:15}),a.push({sum:14,dice:14}),a.push({sum:13,dice:13}),a.push({sum:12,dice:12}),a.push({sum:10,dice:10}),a.push({sum:8,dice:8}));return a},E=function(){function e(){Object(s.a)(this,e),this.rolls={str:15,dex:14,con:13,int:12,wis:10,cha:8},this.hasChanged=!1}return Object(i.a)(e,[{key:"getRolls",value:function(){return this.rolls}},{key:"getRoll",value:function(e){return this.rolls[e]}},{key:"setRoll",value:function(e,t){this.rolls[e]=t,this.hasChanged=!0}},{key:"roll",value:function(e){for(var t=Object.keys(this.rolls),a=k(e),n=0;n<a.length;n++)this.rolls[t[n]]=a[n].sum}}]),e}();var S=function(){document.title="Stat Roller";var e=new E;return l.a.createElement(b,{appState:e})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(l.a.createElement(S,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},9:function(e,t,a){e.exports=a(16)}},[[9,1,2]]]);
//# sourceMappingURL=main.a383c406.chunk.js.map